# lazygit.nvim 使い方ガイド

VSCodeのGit Graphのような、ビジュアルなGit操作ができます。

---

## 🚀 起動方法

### Neovimから起動
```
Space + gg  → LazyGitを開く
Space + gf  → 現在のファイルの履歴を開く
```

### ターミナルから起動（練習用）
```bash
lazygit
```

---

## 🎯 lazygitの画面構成

起動すると、5つのパネルが表示されます：

```
┌─────────────────────────────────────┐
│ 1. ステータス（上部）                 │
├──────────────┬──────────────────────┤
│ 2. ファイル   │ 4. メインパネル        │
│    (左上)    │    (右側)            │
├──────────────┤    - 差分表示         │
│ 3. ブランチ   │    - コミット詳細     │
│    (左下)    │    - ログなど         │
└──────────────┴──────────────────────┘
│ 5. コマンド（下部）                  │
└─────────────────────────────────────┘
```

### パネルの切り替え
```
1, 2, 3, 4, 5  → 各パネルにジャンプ
Tab           → 次のパネルへ
Shift+Tab     → 前のパネルへ
```

---

## ⌨️  基本操作

### ナビゲーション
| キー | 動作 |
|------|------|
| `j` / `k` | 上下移動 |
| `h` / `l` | 左右移動（タブ切り替え） |
| `g` / `G` | 最初/最後へジャンプ |
| `/` | 検索 |
| `n` / `N` | 次/前の検索結果 |

### ファイル操作（パネル2: Files）
| キー | 動作 | 説明 |
|------|------|------|
| `Space` | ステージング/アンステージング | ファイルをステージング |
| `a` | すべてステージング | 全ファイルをステージング |
| `d` | 変更を破棄 | ファイルの変更を元に戻す |
| `e` | ファイルを編集 | エディタで開く |
| `c` | コミット | コミット画面を開く |
| `Enter` | 差分を表示 | 右側に差分が表示される |

### コミット操作
| キー | 動作 | 説明 |
|------|------|------|
| `c` | コミット | コミットメッセージを入力 |
| `a` | Amend | 前のコミットに追加 |
| `r` | リワード | コミットメッセージを編集 |

### ブランチ操作（パネル3: Branches）
| キー | 動作 | 説明 |
|------|------|------|
| `Space` | チェックアウト | ブランチを切り替え |
| `n` | 新規ブランチ | 新しいブランチを作成 |
| `d` | ブランチ削除 | ブランチを削除 |
| `r` | リネーム | ブランチ名を変更 |
| `m` | マージ | 現在のブランチにマージ |
| `M` | リモート表示 | リモートブランチを表示 |

### リモート操作
| キー | 動作 | 説明 |
|------|------|------|
| `p` | Push | リモートにプッシュ |
| `P` | Pull | リモートからプル |
| `f` | Fetch | リモートをフェッチ |

### コミット履歴（パネル4: Commits）
| キー | 動作 | 説明 |
|------|------|------|
| `Enter` | コミット詳細 | 差分を表示 |
| `d` | Diff | 差分を表示 |
| `r` | リワード | コミットメッセージ編集 |
| `g` | リセット | このコミットにリセット |
| `c` | Cherry-pick | コミットをチェリーピック |

---

## 🎨 VSCode風の使い方

### ケース1: 変更をコミットする

```
1. Space + gg でlazygitを開く
2. パネル2（Files）で変更ファイルを確認
3. j/k で移動、Enter で差分確認
4. Space でステージング
5. c を押してコミット
6. コミットメッセージを入力
7. Ctrl+s または Esc で保存して閉じる
8. q でlazygitを閉じる
```

### ケース2: ブランチを切り替える

```
1. Space + gg
2. 3 を押してブランチパネルへ
3. j/k でブランチを選択
4. Space でチェックアウト
```

### ケース3: コミット履歴を見る（Git Graph風）

```
1. Space + gg
2. 4 を押してコミット履歴パネルへ
3. j/k で移動
4. Enter でコミット詳細を確認
5. グラフィカルに履歴が表示される
```

### ケース4: 部分的にステージング

```
1. Space + gg
2. パネル2（Files）でファイルを選択
3. Enter で差分を表示
4. e を押して行選択モードへ
5. j/k で行を選択
6. Space で選択行をステージング
```

### ケース5: ファイルの変更履歴を見る

```
1. Neovimでファイルを開いた状態で
2. Space + gf
3. そのファイルのコミット履歴が表示される
```

---

## 📊 よく使う操作フロー

### 日常的なコミットフロー

```
Space + gg
  ↓
2 (Filesパネル)
  ↓
Space (ステージング)
  ↓
c (コミット)
  ↓
メッセージ入力 → Esc
  ↓
p (Push)
  ↓
q (終了)
```

### ブランチ切り替え → 作業 → マージ

```
Space + gg
  ↓
3 (Branchesパネル)
  ↓
n (新規ブランチ作成)
  ↓
[作業してコミット]
  ↓
Space (mainに切り替え)
  ↓
m (マージ)
```

---

## ⚙️  便利な設定

### lazygitの設定ファイル

場所：`~/.config/lazygit/config.yml`

よく使う設定例：

```yaml
git:
  paging:
    colorArg: always
    pager: delta --dark --paging=never

gui:
  theme:
    activeBorderColor:
      - green
      - bold
    inactiveBorderColor:
      - white

  # コミットメッセージの長さ制限
  commitLength:
    show: true

  # マウスサポート
  mouseEvents: true
```

---

## 🔑 重要なキーマップ一覧

### 最低限覚えるべき操作

| 操作 | キー |
|------|------|
| パネル移動 | `1, 2, 3, 4, 5` |
| 項目移動 | `j / k` |
| ステージング | `Space` |
| コミット | `c` |
| プッシュ | `p` |
| プル | `P` |
| 終了 | `q` |
| ヘルプ | `?` |

### 困ったら

```
? を押す → 全キーマップが表示される
x を押す → オプションメニューが開く
q を押す → 終了
```

---

## 🎯 gitsigns vs lazygit の使い分け

### gitsigns（行レベルの細かい操作）
- 編集中にリアルタイムで変更を確認
- 行単位でステージング
- 素早くblame確認

### lazygit（プロジェクト全体の操作）
- コミット履歴の確認（Git Graph）
- ブランチ操作
- 複数ファイルをまとめてステージング
- リモート操作（push/pull）

**両方使い分けるのがベスト！**

---

## 📝 練習問題

### 初級：基本のコミット

1. `Space + gg` でlazygitを開く
2. ファイルをステージング
3. コミットする
4. lazygitを閉じる

### 中級：ブランチ作成→マージ

1. 新しいブランチを作成
2. ファイルを変更してコミット
3. mainブランチに戻る
4. マージする

### 上級：部分ステージング

1. ファイルの一部だけをステージング
2. コミット
3. 残りの変更を確認

---

## 🚀 次のステップ

1. **実際に使ってみる** - `Space + gg` で起動して触ってみる
2. **`?` でヘルプを見る** - その場でキーマップ確認
3. **設定をカスタマイズ** - `~/.config/lazygit/config.yml`

---

困ったことがあれば、いつでも聞いてください！
